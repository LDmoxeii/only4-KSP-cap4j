@startuml
!include ..\lib_eventstorming.puml

Command("RegisterMemberWithPassword") [
    通过密码方式注册用户
    --触发事件--
    --属性--
    用户名
    密码
    --规则--
    用户名不能为空
    不存在同名用户
    密码不能为空
]
Command("RegisterMemberWithPhone") [
    通过手机号方式注册用户
    --触发事件--
    --属性--
    手机号
    --规则--
    手机号不为空
    手机号未绑定帐号
]
Command("UpdateMemberPhone") [
    更新用户手机号
    --触发事件--
    --属性--
    用户ID
    手机号
    --规则--
    用户必须存在
    手机号不为空
    手机号未绑定帐号
]
Command("UpdateMemberPassword") [
    更新用户密码
    --触发事件--
    --属性--
    用户ID
    新密码
    --规则--
    用户必须存在
    密码不能为空
]
Command("UpdateMemberInfo") [
    更新用户信息
    --触发事件--
    --属性--
    用户ID
    用户名
    个性签名
    --规则--
    用户必须存在
    用户名不能为空
    不存在同名用户
    个性签名不能为空
]
Command("UpdateMemberRank") [
    更新用户等级分
    --触发事件--
    已签到
    --属性--
    用户ID
    等级分
    --规则--
    用户必须存在
    用户拥有等级
]
Command("DeleteMember") [
    删除用户
    --触发事件--
    --属性--
    用户ID
    --规则--
    用户必须存在
    已遣散星球会员
]
Command("ReportMember") [
    举报用户
    --触发事件--
    --属性--
    用户ID
    --规则--
    用户必须存在
    用户未被封禁
]
Command("UpMemberLevel") [
     提升用户等级
     --触发事件--
     已更新用户等级分
     --属性--
     用户ID
     --规则--
    用户必须存在
    当前等级为将提升等级的下级
    如过1->2积分须大于等于233
    如果2->3积分须大于等于3306
    如果3->4积分须大于等于8848
    如果4->5积分须大于等于50000
    如果5->6积分须大于等于66666
]
Command("UpdateMemberLikeCount") [
    更新用户点赞数
    --触发事件--
    已更新文章点赞数
    已更新星球点赞数
    已更新文章评论点赞数
    已更新星球评论点赞数
    --属性--
    用户ID
    点赞数
    --规则--
    用户必须存在
    点赞数不为NULL
]
Command("UpdateMemberFanCount") [
    更新用户粉丝数
    --触发事件--
    已关注用户
    已取消关注用户
    --属性--
    用户ID
    粉丝数
    --规则--
    用户必须存在
    粉丝数不为NULL
]
Command("UpdateMemberWorkCount") [
    更新用户作品数
    --触发事件--
    已创建文章
    已删除文章
    --属性--
    用户ID
    作品数
    --规则--
    用户必须存在
    作品数不为NULL
]
Command("UpdateMemberViewCount") [
    更新用户浏览量
    --触发事件--
    文章浏览量已更新
    --属性--
    用户ID
    浏览量
    --规则--
    用户必须存在
    浏览量不为NULL
]
Command("BanMember") [
    封禁用户
    --触发事件--
    --属性--
    用户ID
    封禁时间
    封禁时长
    --规则--
    用户必须存在
    用户未被封禁
    封禁时长必须大于0
]
Command("UnbanMember") [
    取消封禁用户
    --触发事件--
    --属性--
    用户ID
    --规则--
    用户必须存在
    用户已被封禁
]
Command("FollowMember") [
    关注用户
    --触发事件--
    --属性--
    用户ID
    被关注ID
    --规则--
    两位用户都必须存在
    用户不能关注自己
    用户未被关注
]
Command("UnfollowMember") [
    取消关注用户
    --触发事件--
    --属性--
    用户ID
    被关注ID
    --规则--
    两位用户都必须存在
    用户已被关注
]
Command("CreateFavorites") [
    创建收藏夹
    --触发事件--
    --属性--
    收藏夹名
    收藏夹描述
    --规则--
    收藏夹名不能为空
    收藏夹描述不能为空
    不存在同名收藏夹
]
Command("UpdateFavoritesInfo") [
    更新收藏夹信息
    --触发事件--
    --属性--
    用户ID
    收藏夹ID
    收藏夹名
    收藏夹描述
    --规则--
    用户必须存在
    收藏夹必须存在
    收藏夹名不能为空
    不存在同名收藏夹
    收藏夹描述不能为空
    默认收藏夹不能修改
]
Command("AddArticleToFavorite") [
    收藏文章
    --触发事件--
    当前用户
    --属性--
    用户ID
    收藏夹ID
    文章ID
    --规则--
    用户必须存在
    收藏夹必须存在
    文章必须存在
    未在当前收藏夹中
]
Command("RemoveArticleFromFavorite") [
    取消收藏文章
    --触发事件--
    --属性--
    用户ID
    收藏夹ID
    文章ID
    --规则--
    用户必须存在
    收藏夹必须存在
    文章必须存在
    已在当前收藏夹中
]
Command("DeleteFavorites") [
    删除收藏夹
    --触发事件--
    --属性--
    用户ID
    收藏夹ID
    --规则--
    用户必须存在
    收藏夹必须存在
    非默认收藏夹
]
Command("UpdateMemberStarInfo") [
    更新用户星球信息
    --触发事件--
    已更新星球信息
    --属性--
    用户ID
    星球ID
    星球名
    --规则--
    用户必须存在
    星球必须存在
    星球名不能为空
]
Command("UpdateMemberStardustCount")[
    更新用户星尘数
    --触发事件--
    已加入星球
    已离开星球
    --属性--
    用户ID
    星尘数
    --规则--
    用户必须存在
    星尘数不为NULL
]
Command("UpdateBlackMemberInfo") [
    更新拉黑用户信息
    --触发事件--
    已更新用户信息
    --属性--
    用户ID
    被拉黑用户ID
    被拉黑用户名
    --规则--
    用户必须存在
    被拉黑用户必须存在
    被拉黑用户名不能为空
]
Command("UpdateFollowMemberInfo") [
    更新关注用户信息
    --触发事件--
    已更新用户信息
    --属性--
    用户ID
    关注用户ID
    关注用户名
    --规则--
    用户必须存在
    关注用户必须存在
    关注用户名不能为空
]
Command("UpdateMemberViewCount")[
    更新用户浏览量
    --触发事件--
    文章浏览量已更新
    --属性--
    用户ID
    浏览量
    --规则--
    用户必须存在
    浏览量不为NULL
]
Command("UpdateMemberWorkCountBatch") [
    批量更新用户作品数
    --触发事件--
    已创建文章
    已删除文章
    --属性--
    用户ID列表
    作品数
    --规则--
    作品数不为NULL
]
Command("UpdateMemberViewCountBatch") [
    批量更新用户播放量
    --触发事件--
    文章浏览量已更新
    --属性--
    用户ID列表
    浏览量
    --规则--
    浏览量不为NULL
]
Command("UpdateBlackMemberInfoBatch") [
    批量更新拉黑用户信息
    --触发事件--
    已更新用户信息
    --属性--
    用户ID列表
    被拉黑用户ID
    被拉黑用户名
    --规则--
    被拉黑用户必须存在
    被拉黑用户名不能为空
]
Command("UpdateFollowMemberInfoBatch")[
    批量更新关注用户信息
    --触发事件--
    已更新用户信息
    --属性--
    用户ID列表
    关注用户ID
    关注用户名
    --规则--
    关注用户必须存在
    关注用户名不能为空
]

FacadeCommand("UpdateMemberFollowingCount") [
    更新用户关注数
    --触发事件--
    已关注用户(内部)
    已取消关注用户(内部)
    --属性--
    用户ID
    关注数
    --规则--
    用户必须存在
    关注数不为NULL
]

FacadeCommand("UpdateFavoritesArticleCount") [
    更新用户收藏文章数
    --触发事件--
    已收藏文章
    已取消收藏文章
    --属性--
    用户ID
    收藏文章数
    --规则--
    用户必须存在
    收藏文章数不为NULL
]
@enduml
